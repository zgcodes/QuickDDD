(function(t,d){"function"===typeof define&&define.amd?define(["jquery"],d):"object"===typeof exports?module.exports=d(require("jquery")):t.bootbox=d(t.jQuery)})(this,function init(d,z){function p(a,b,e){a.stopPropagation();a.preventDefault();b.delayCloseTimerId&&(clearTimeout(b.delayCloseTimerId),b.delayCloseTimerId=null);d.isFunction(e)&&!1===e(a,b.options.args)||b.modal("hide")}function v(a){var b,e=0;for(b in a)e++;return e}function h(a,b){var e=0;d.each(a,function(a,d){b(a,d,e++)})}function w(a){var b;if("object"!==typeof a)throw Error("Please supply an object of options");if(!a.message&&!a.href&&!a.remote)throw Error("\u8bf7\u6307\u5b9amessage");a=d.extend({},q,a);a.buttons||(a.buttons={});b=a.buttons;v(b);h(b,function(a,c,g){d.isFunction(c)&&(c=b[a]={callback:c});if("object"!==d.type(c))throw Error("button with key "+a+" must be an object");c.label||(c.label=a);c.className||(c.className=c.label==l.en.OK||c.label==l.en.CONFIRM?"btn-primary":"btn-default")});return a}function m(a,b){var d=a.length,c={};if(1>d||3<d)throw Error("\u53c2\u6570\u4e2a\u6570\u9519\u8bef\uff0c\u53ea\u80fd\u662f1\u52303\u4e2a\u53c2\u6570\uff0c\u7b2c3\u4e2a\u53c2\u6570\u662foptions\u5bf9\u8c61");3===d&&(c=a[2]);2<=d||"string"===typeof a[0]?(c[b[0]]=a[0],c[b[1]]=a[1]):c=a[0];return c}function r(a,b,e,c){a.buttons=u.apply(null,b);return x(d.extend(!0,{},a,m(c,e)),b)}function u(){for(var a={},b=0,d=arguments.length;b<d;b++){var c=arguments[b],g=c.toLowerCase(),c=c.toUpperCase(),f=l[q.locale];a[g]={label:f?f[c]:l.en[c]}}return a}function x(a,b){var d={};h(b,function(a,b){d[b]=!0});h(a.buttons,function(a){if(void 0===d[a])throw Error("button key "+a+" is not allowed (options are "+b.join("\n")+")");});return a}var s={text:"\x3cinput class\x3d'bootbox-input bootbox-input-text form-control' autocomplete\x3doff type\x3dtext /\x3e",textarea:"\x3ctextarea class\x3d'bootbox-input bootbox-input-textarea form-control'\x3e\x3c/textarea\x3e",email:"\x3cinput class\x3d'bootbox-input bootbox-input-email form-control' autocomplete\x3d'off' type\x3d'email' /\x3e",select:"\x3cselect class\x3d'bootbox-input bootbox-input-select form-control'\x3e\x3c/select\x3e",checkbox:"\x3cdiv class\x3d'checkbox'\x3e\x3clabel\x3e\x3cinput class\x3d'bootbox-input bootbox-input-checkbox' type\x3d'checkbox' /\x3e\x3c/label\x3e\x3c/div\x3e",date:"\x3cinput class\x3d'bootbox-input bootbox-input-date form-control' autocomplete\x3doff type\x3d'date' /\x3e",time:"\x3cinput class\x3d'bootbox-input bootbox-input-time form-control' autocomplete\x3doff type\x3d'time' /\x3e",number:"\x3cinput class\x3d'bootbox-input bootbox-input-number form-control' autocomplete\x3doff type\x3d'number' /\x3e",password:"\x3cinput class\x3d'bootbox-input bootbox-input-password form-control' autocomplete\x3d'off' type\x3d'password' /\x3e"},q={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,delay:0,container:"body"},k={success:function(){var a={className:"bootbox-success",width:"300px",delay:1E3,backdrop:!1},a=d.extend(!0,{},a,m(arguments,["message","callback"]));a.message='\x3ci class\x3d"icon-ok-sign bigger-120"\x3e\x3c/i\x3e \x3cspan class\x3d"bigger-120"\x3e'+a.message+"\x3c/span\x3e";100<a.delay&&(a.message+='\x3cdiv class\x3d"align-right"\x3e'+a.delay/1E3+"\u79d2\u540e\u81ea\u52a8\u5173\u95ed\x3c/div\x3e");a.onescape=function(){return d.isFunction(a.callback)?a.callback():!0};return k.dialog(a)},info:function(){var a={className:"bootbox-info",width:"300px",backdrop:!1},a=d.extend(!0,{},a,m(arguments,["message","callback"]));a.message='\x3ci class\x3d"icon-info-sign bigger-120"\x3e\x3c/i\x3e \x3cspan class\x3d"bigger-120"\x3e'+a.message+"\x3c/span\x3e";100<a.delay&&(a.message+='\x3cdiv class\x3d"align-right"\x3e'+a.delay/1E3+"\u79d2\u540e\u81ea\u52a8\u5173\u95ed\x3c/div\x3e");a.onescape=function(){return d.isFunction(a.callback)?a.callback():!0};return k.dialog(a)},error:function(){var a={className:"bootbox-error",width:"400px",backdrop:!1},a=d.extend(!0,{},a,m(arguments,["message","callback"]));a.message='\x3ci class\x3d"icon-warning-sign bigger-120"\x3e\x3c/i\x3e \x3cspan class\x3d"fs16"\x3e'+a.message+"\x3c/span\x3e";100<a.delay&&(a.message+='\x3cdiv class\x3d"align-right"\x3e'+a.delay/1E3+"\u79d2\u540e\u81ea\u52a8\u5173\u95ed\x3c/div\x3e");a.onescape=function(){return d.isFunction(a.callback)?a.callback():!0};return k.dialog(a)},alert:function(){var a={className:"bootbox-alert",title:"\u63d0\u793a",backdrop:!0},a=r(a,["ok"],["message","callback"],arguments);a.message='\x3cspan class\x3d"fs16"\x3e'+a.message+"\x3c/span\x3e";if(a.callback&&!d.isFunction(a.callback))throw Error("callback \u53c2\u6570\u5fc5\u987b\u662f\u4e00\u4e2a function \u5bf9\u8c61");a.buttons.ok.callback=a.onescape=function(){return d.isFunction(a.callback)?a.callback():!0};return k.dialog(a)},confirm:function(){var a={className:"bootbox-confirm",title:"\u63d0\u793a",backdrop:!0},a=r(a,["confirm","cancel"],["message","callback"],arguments);a.buttons.cancel.callback=a.onescape=function(){return a.callback.call(this,!1,a.args)};a.buttons.confirm.callback=function(){return a.callback.call(this,!0,a.args)};if(!d.isFunction(a.callback))throw Error("confirm requires a callback");return k.dialog(a)},prompt:function(){var a,b,e,c,g,f;e=d("\x3cform class\x3d'bootbox-form'\x3e\x3c/form\x3e");a={className:"bootbox-prompt",buttons:u("confirm","cancel"),backdrop:!0,value:"",inputType:"text"};a=r(a,["confirm","cancel"],["title","callback"],arguments);g=void 0===a.show?!0:a.show;f=document.createElement("input");f.setAttribute("type",a.inputType);["date","time","number"][a.inputType]&&(a.inputType=f.type);a.message=e;a.buttons.cancel.callback=function(){return a.callback(null)};a.buttons.confirm.callback=function(){var b;switch(a.inputType){case "text":case "textarea":case "email":case "select":case "date":case "time":case "number":case "password":b=c.val();break;case "checkbox":var e=c.find("input:checked");b=[];h(e,function(a,c){b.push(d(c).val())})}return a.callback(b)};a.show=!1;if(!a.title)throw Error("\u8f93\u5165\u6846\u9700\u8981\u6307\u5b9a\u6807\u9898(title)");if(!d.isFunction(a.callback))throw Error("\u8f93\u5165\u6846\u9700\u8981\u56de\u8c03\u51fd\u6570(callback)");if(!s[a.inputType])throw Error("\u4e0d\u6b63\u786e\u7684\u8f93\u5165\u7c7b\u578b(inputType)");c=d(s[a.inputType]);switch(a.inputType){case "text":case "textarea":case "email":case "date":case "time":case "number":case "password":c.val(a.value);break;case "select":var n={};f=a.inputOptions||[];if(!f.length)throw Error("select\u7c7b\u578b\u7684\u8f93\u5165\u6846\u9700\u8981inputOptions\u53c2\u6570\u6307\u5b9a\u53ef\u9009\u9879");h(f,function(a,b){var e=c;if(void 0===b.value||void 0===b.text)throw Error("inputOptions\u9009\u9879\u7684\u683c\u5f0f\u9519\u8bef");b.group&&(n[b.group]||(n[b.group]=d("\x3coptgroup/\x3e").attr("label",b.group)),e=n[b.group]);e.append("\x3coption value\x3d'"+b.value+"'\x3e"+b.text+"\x3c/option\x3e")});h(n,function(a,b){c.append(b)});c.val(a.value);break;case "checkbox":var y=d.isArray(a.value)?a.value:[a.value];f=a.inputOptions||[];if(!f.length)throw Error("checkbox\u7c7b\u578b\u7684\u8f93\u5165\u6846\u9700\u8981inputOptions\u53c2\u6570\u6307\u5b9a\u53ef\u9009\u9879");if(!f[0].value||!f[0].text)throw Error("inputOptions\u9009\u9879\u7684\u683c\u5f0f\u9519\u8bef");c=d("\x3cdiv/\x3e");h(f,function(b,e){var f=d(s[a.inputType]);f.find("input").attr("value",e.value);f.find("label").append(e.text);h(y,function(a,b){b===e.value&&f.find("input").prop("checked",!0)});c.append(f)})}a.placeholder&&c.attr("placeholder",a.placeholder);a.maxlength&&c.attr("maxlength",a.maxlength);a.pattern&&c.attr("pattern",a.pattern);"textarea"==a.inputType&&a.rows&&c.attr("rows",a.rows);e.append(c);e.on("submit",function(a){a.preventDefault();b.find(".btn-primary").click()});b=k.dialog(a);b.off("shown.bs.modal");b.on("shown.bs.modal",function(){c.focus()});!0===g&&b.modal("show");return b},dialog:function(a){a=w(a);var b=d("\x3cdiv class\x3d'bootbox modal' tabindex\x3d'-1' role\x3d'dialog'\x3e\x3cdiv class\x3d'modal-body'\x3e\x3cdiv class\x3d'bootbox-body'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"),e=b.find(".modal-body"),c=a.buttons,g="",f={onescape:a.onescape,onclose:a.onclose};b.options=a;h(c,function(a,b){g+="\x3cbutton data-bb-handler\x3d'"+a+"' type\x3d'button' class\x3d'btn btn-lg "+b.className+"'\x3e"+b.label+"\x3c/button\x3e";f[a]=b.callback});"string"==typeof a.href&&0<a.href.length?(b.addClass("modal-frame"),a.height||a.maxHeight||(a.modalOverflow=!0),e.css("padding","0"),e.html('\x3ciframe style\x3d"width: 100%; height: 100%; position: absolute;" frameborder\x3d"0"\x3e\x3c/iframe\x3e'),e.find("iframe").on("load",function(){b.parentWindow=window;b.contentWindow=e.find("iframe")[0].contentWindow;e.find("iframe")[0].contentWindow.modalDialog=b;null!=e.find("iframe")[0].contentWindow.modalDialogInit&&e.find("iframe")[0].contentWindow.modalDialogInit(a.args)})):e.find(".bootbox-body").html(a.message);!0===a.animate&&b.addClass("fade");a.className&&b.addClass(a.className);a.title&&e.before("\x3cdiv class\x3d'modal-header'\x3e\x3ch4 class\x3d'modal-title'\x3e\x3c/h4\x3e\x3c/div\x3e");a.closeButton&&(c=d("\x3cbutton type\x3d'button' class\x3d'bootbox-close-button close' data-dismiss\x3d'modal' aria-hidden\x3d'true'\x3e\x26times;\x3c/button\x3e"),a.title?b.find(".modal-header").prepend(c):c.prependTo(e));a.title&&b.find(".modal-title").html(a.title);g.length&&(e.after("\x3cdiv class\x3d'modal-footer'\x3e\x3c/div\x3e"),b.find(".modal-footer").html(g));b.on("hidden.bs.modal",function(c){c.target===this&&(b.remove(),d.isFunction(a.onclose)&&a.onclose())});b.on("shown.bs.modal",function(){b.find(".btn-primary:first").focus()});b.on("escape.close.bb",function(a){f.onescape&&p(a,b,f.onescape)});b.on("click",".modal-footer button",function(a){var c=d(this).data("bb-handler");p(a,b,f[c])});b.on("click",".bootbox-close-button",function(a){p(a,b,f.onescape)});b.on("keyup",function(a){27===a.which&&b.trigger("escape.close.bb")});d(a.container).append(b);b.modal(a);"string"==typeof a.href&&0<a.href.length&&b.find("iframe").attr("src",a.href);b.close=function(){b.modal("hide")};"number"==typeof a.delay&&100<a.delay&&(b.delayCloseTimerId=setTimeout(function(){b.trigger("escape.close.bb")},a.delay));return b},setDefaults:function(){var a={};2===arguments.length?a[arguments[0]]=arguments[1]:a=arguments[0];d.extend(q,a)},hideAll:function(){d(".bootbox").modal("hide")}},l={en:{OK:"\u786e\u5b9a",CANCEL:"\u53d6\u6d88",CONFIRM:"\u786e\u8ba4"}};k.init=function(a){return init(a||d)};return k});